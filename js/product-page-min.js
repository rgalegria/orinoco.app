let productObject;document.addEventListener("DOMContentLoaded",()=>{getProduct().then(e=>{loadProductInDOM(e).then(()=>{showSlide(slideIndex);const e=document.getElementById("add-product-btn");document.getElementById("lens-option").addEventListener("change",e=>{lensDropdownOption=e.target.value}),e.addEventListener("click",addProduct)})})});let slideIndex=1;const getProduct=async()=>{const e=new URLSearchParams(window.location.search).get("id");let n=await fetch(apiGetUrl+e).catch(e=>{}),t=await n.json();return productObject=t,t},loadProductInDOM=async e=>{let n="";e.lenses.forEach(e=>{n+=`<option class="lens__dropd__item" value="${e}">${e}</option>`});let t=`\n    \x3c!-- Slideshow container --\x3e\n      <div class="slideshow">\n\n        \x3c!-- Slideshow img --\x3e\n        <div id="slide" \n        class="slideshow__slide fade hide" \n        style="background-image: url(${e.imageUrl}); background-position: center; background-size: cover; background-repeat: no-repeat; background-color: white;"></div>\n\n        <div id="slide" \n        class="slideshow__slide fade hide" \n        style="background-image: url(${e.imageUrl}); background-position: center; background-size: cover; background-repeat: no-repeat; background-color: white;"></div>\n\n        <div id="slide" \n        class="slideshow__slide fade hide" \n        style="background-image: url(${e.imageUrl}); background-position: center; background-size: cover; background-repeat: no-repeat; background-color: white;"></div>\n        \n        \x3c!-- Next and previous buttons --\x3e\n        <a class="prev-btn" onclick="plusSlide(-1)">&#10094;</a>\n        <a class="next-btn" onclick="plusSlide(1)">&#10095;</a>\n\n        \x3c!-- The dots/circles --\x3e\n        <div class="dots" style="text-align: center;">\n          <span class="dot" onclick="currentSlide(1)"></span>\n          <span class="dot" onclick="currentSlide(2)"></span>\n          <span class="dot" onclick="currentSlide(3)"></span>\n        </div>\n      </div>\n\n      \x3c!-- Product info --\x3e\n      <article class="product">\n        <h1 class="product__title">${e.name}</h1>\n        <h2 class="product__subtitle">${priceFormat(e.price)} &euro;</h2>\n\n        \x3c!-- Drop button --\x3e\n        <div class="lens__dropd product__dropd">\n          <select id="lens-option" class="lens__dropd__btn">\n            <option class="lens__dropd__item" value="none">Veuillez choisir</option>\n            ${n}\n          </select>\n        </div>\n\n        \x3c!-- Product description --\x3e\n        <p class="product__description">${e.description}</p>\n        <button id="add-product-btn" class="submit-btn product__btn">ajouter au panier</button>\n        <div class="underlinedgrey-btn product__return-btn">\n          <a\n            class="underlinedgrey-btn__link"\n            href="../product-list/"\n            >retourner Ã  la liste</a>\n        </div>\n      </article>\n        `,d=document.getElementById("product-container");return d.innerHTML=d.innerHTML+t,!0},showSlide=e=>{let n,t=document.getElementsByClassName("hide"),d=document.getElementsByClassName("dot");for(e>t.length&&(slideIndex=1),e<1&&(slideIndex=t.length),n=0;n<t.length;n++)t[n].style.display="none";for(n=0;n<d.length;n++)d[n].className=d[n].className.replace(" active","");t[slideIndex-1].style.display="block",d[slideIndex-1].className+=" active"},plusSlide=e=>{showSlide(slideIndex+=e)},currentSlide=e=>{showSlide(slideIndex=e)};